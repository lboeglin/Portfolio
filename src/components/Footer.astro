---
import { useTranslations } from '../i18n/utils';
import { type Lang, defaultLang } from '../i18n/ui';

const today = new Date();
const currentLang = (Astro.currentLocale || defaultLang) as Lang;
const t = useTranslations(currentLang);
---

<footer
  id="contact"
  class="footer footer-center p-10 bg-base-200 text-base-content rounded mt-auto"
  transition:name="footer"
>
  <div>
    <p class="font-bold text-lg">
      {/* FIX: Removed direct email text and href */}
      <a href="#" id="footer-email" class="link link-hover">Contact Me</a>
      <br />
      <span class="font-normal opacity-70 text-sm">{t('footer.role')}</span>
    </p>
    <p class="text-xs opacity-50">
      Copyright Â© {today.getFullYear()} - {t('footer.rights')}
    </p>
  </div>
</footer>

<script is:inline>
  document.addEventListener('astro:page-load', () => {
    const user = 'lohan.boeglin';
    const domain = 'gmail.com';
    const address = `${user}@${domain}`;

    const footerLink = document.getElementById('footer-email');

    if (footerLink) {
      footerLink.href = `mailto:${address}`;
      footerLink.textContent = address;
    }
  });
</script>
